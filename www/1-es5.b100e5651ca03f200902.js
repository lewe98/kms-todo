!function(){function e(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"74gq":function(t,n,i){"use strict";i.d(n,"a",(function(){return h}));var a=i("mrSG"),s=i("uVvT"),u=i("fXoL"),c=i("TEn/"),d=i("NwP+"),h=function(){var t=function(){function t(e,n,o,i){r(this,t),this.modalCtrl=e,this.storageService=n,this.alertController=o,this.loadingController=i,this.todos=[],this.filteredAufgabenArray=[],this.categories=[],this.catname="",this.loading=this.loadingController.create({message:"Bitte warten...",duration:1500}),this.searchInput="",this.filterCat="",this.refreshTodos(),this.refreshCategories()}return o(t,[{key:"refreshTodos",value:function(){this.todos=this.storageService.getTodos(),this.filteredAufgabenArray=this.storageService.getTodos(),this.searchInput=""}},{key:"refreshCategories",value:function(){this.categories.length||localStorage.getItem("cats")||this.storageService.addCategorie(new s.a("0","nicht kategorisiert")),this.categories=this.storageService.getCategories()}},{key:"add",value:function(e,t,r){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.titel||!e.beschreibung){n.next=17;break}return e.id=this.todos.length,e.autor=t,1===(o=String((new Date).getMinutes())).length&&(o="0"+o),e.zeit=(new Date).getHours()+":"+o,r||(r="nicht kategorisiert"),e.kategorie=new s.a(r,r),n.next=9,this.todos.push(e);case 9:return n.next=11,this.storageService.addTodo(e);case 11:return n.next=13,this.refreshTodos();case 13:return n.next=15,this.modalCtrl.dismiss();case 15:n.next=18;break;case 17:alert("Bitte g\xfcltige Daten eintragen.");case 18:case"end":return n.stop()}}),n,this)})))}},{key:"getCatByName",value:function(t){var r,n=e(this.categories);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(t===o.name)return o}}catch(i){n.e(i)}finally{n.f()}}},{key:"addCategory",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:0!==e.length?(r=this.categories.length.toString(),n=new s.a(r,e),this.storageService.addCategorie(n),this.refreshCategories()):alert("Please enter a valid category name.");case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setPriority",value:function(e,t){var r=this.todos.indexOf(e);e.prioritaet=t,this.todos[r]=e,this.storageService.updateTodo(e)}},{key:"setCategory",value:function(e,t){e.kategorie=t,this.storageService.updateTodo(e),this.refreshTodos()}},{key:"edit",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.titel&&e.beschreibung,!t.t0){t.next=6;break}return this.todos=this.todos.map((function(t){if(t.id===e.id)return e.kategorie=r.getCatByName(r.catname),e})),this.storageService.updateTodo(e),t.next=6,this.modalCtrl.dismiss();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"delete",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.todos.splice(this.todos.indexOf(e),1),this.storageService.deleteTodo(e),this.refreshTodos();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"deleteCategorie",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.categories.splice(this.categories.indexOf(e),1),this.storageService.deleteCategorie(e),this.refreshCategories();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"done",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.erledigt=!0,this.storageService.updateTodo(e),this.refreshTodos();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"notDone",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.erledigt=!1,this.storageService.updateTodo(e),this.refreshTodos();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"presentAlertImportTodos",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("todos")){e.next=6;break}return e.next=3,this.alertController.create({header:"Todos \xfcbernehmen?",message:"M\xf6chten sie die erstellten Todos in ihr Profil \xfcbernehmen.<br>Falls nicht werden sie <strong>gel\xf6scht</strong>.",buttons:[{text:"L\xf6schen",role:"cancel",cssClass:"secondary",handler:function(){localStorage.removeItem("todos")}},{text:"\xdcbernehmen",handler:function(){return Object(a.a)(r,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loading;case 2:return e.next=4,e.sent.present();case 4:return t=JSON.parse(localStorage.getItem("todos")),localStorage.removeItem("todos"),this.storageService.importToFirebase(t),e.next=9,this.loading;case 9:return e.next=11,e.sent.onDidDismiss();case 11:this.refreshTodos();case 12:case"end":return e.stop()}}),e,this)})))}}]});case 3:return t=e.sent,e.next=6,t.present();case 6:case"end":return e.stop()}}),e,this)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Rb(c.H),u.Rb(d.a),u.Rb(c.a),u.Rb(c.G))},t.\u0275prov=u.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},NKrf:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n("mrSG"),a=n("fXoL"),s=n("ZETX"),u=n("TEn/"),c=n("tyNb"),d=n("74gq"),h=n("3Pt+"),l=n("ofXK"),g=["email"];function f(e,t){if(1&e&&(a.Nb(0,"p",7),a.ic(1),a.Mb()),2&e){var r=a.Xb();a.yb(1),a.kc(" ",r.errors.get("wrongData"),"")}}var v=function(){var e=function(){function e(t,n,o,i){r(this,e),this.authService=t,this.popoverController=n,this.router=o,this.todoService=i,this.errors=new Map,localStorage.getItem("userID")&&this.router.navigate(["/home"])}return o(e,[{key:"dismissClickPopover",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popoverController.dismiss();case 2:case"end":return e.stop()}}),e,this)})))}},{key:"login",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.errors.clear(),r.next=3,this.dismissClickPopover();case 3:return r.next=5,this.authService.signIn(e,t).then((function(){return Object(i.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.authService.getUser(),!e.t0){e.next=8;break}if(e.t1=this.todoService.todos.length>0,!e.t1){e.next=6;break}return e.next=6,this.todoService.presentAlertImportTodos();case 6:this.authService.isLoggedIn=!0,this.todoService.refreshTodos();case 8:this.router.navigate(["/home"]);case 9:case"end":return e.stop()}}),e,this)})))})).catch((function(r){"auth/invalid-email"===r.code?n.errors.set("wrongData","Fehlerhaftes Email Format!"):e||t?e?t?t.length<6?n.errors.set("wrongData","Passwort muss mindestens 6 Zeichen lang sein!"):("auth/user-not-found"===r.code||"auth/wrong-password"===r.code)&&n.errors.set("wrongData","E-Mail oder Passwort wurde falsch eingegeben!"):n.errors.set("wrongData","Passwort darf nicht leer sein!"):n.errors.set("wrongData","Email darf nicht leer sein!"):n.errors.set("wrongData","E-Mail und Passwort darf nicht leer sein!")}));case 5:case"end":return r.stop()}}),r,this)})))}},{key:"ionViewDidEnter",value:function(){var e=this;setTimeout((function(){return e.emailRef.setFocus()}),10)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Ib(s.a),a.Ib(u.J),a.Ib(c.g),a.Ib(d.a))},e.\u0275cmp=a.Cb({type:e,selectors:[["app-login"]],viewQuery:function(e,t){var r;1&e&&a.lc(g,!0),2&e&&a.bc(r=a.Wb())&&(t.emailRef=r.first)},decls:17,vars:4,consts:[["placeholder","E-Mail","clearOnEdit","false","type","email","required","",1,"ion-text-end",3,"ngModel","ngModelChange"],["email",""],["placeholder","Passwort","clearOnEdit","false","type","password","required","",1,"ion-text-end",3,"ngModel","ngModelChange"],["class","ion-text-end ion-padding-end","style","color:var(--ion-color-danger)",4,"ngIf"],[3,"title","click"],[1,"margin"],[3,"click"],[1,"ion-text-end","ion-padding-end",2,"color","var(--ion-color-danger)"]],template:function(e,t){1&e&&(a.Nb(0,"ion-content"),a.Nb(1,"ion-item"),a.Nb(2,"ion-label"),a.ic(3,"E-Mail*"),a.Mb(),a.Nb(4,"ion-input",0,1),a.Vb("ngModelChange",(function(e){return t.emailForLogIn=e})),a.Mb(),a.Mb(),a.Nb(6,"ion-item"),a.Nb(7,"ion-label"),a.ic(8,"Passwort*"),a.Mb(),a.Nb(9,"ion-input",2),a.Vb("ngModelChange",(function(e){return t.passwordForLogIn=e})),a.Mb(),a.Mb(),a.gc(10,f,2,1,"p",3),a.Nb(11,"ion-button",4),a.Vb("click",(function(){return t.login(t.emailForLogIn,t.passwordForLogIn)})),a.ic(12,"Login"),a.Mb(),a.Nb(13,"p",5),a.ic(14," Noch keinen Account? Dann registriere dich "),a.Nb(15,"a",6),a.Vb("click",(function(){return t.dismissClickPopover(),t.router.navigate(["registrierung"])})),a.ic(16," hier! "),a.Mb(),a.Mb(),a.Mb()),2&e&&(a.yb(4),a.ac("ngModel",t.emailForLogIn),a.yb(5),a.ac("ngModel",t.passwordForLogIn),a.yb(1),a.ac("ngIf",t.errors.get("wrongData")),a.yb(1),a.ac("title","Login"))},directives:[u.h,u.n,u.r,u.m,u.M,h.f,h.d,h.e,l.i,u.f],styles:["ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]}),e}()},"NwP+":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("uVvT"),a=n("fXoL"),s=n("ZETX"),u=function(){var e=function(){function e(t){r(this,e),this.authService=t}return o(e,[{key:"getCategories",value:function(){return this.authService.isLoggedIn?this.getCategoriesFirebase():this.getCategoriesLocalStorage()}},{key:"addCategorie",value:function(e){this.authService.isLoggedIn?this.addCategorieFirebase(e):this.addCategorieLocalStorage(e)}},{key:"deleteCategorie",value:function(e){this.authService.isLoggedIn?this.deleteCategorieFirebase(e):this.deleteCategorieLocalStorage(e)}},{key:"getTodos",value:function(){return this.authService.isLoggedIn?this.getTodosFirebase():this.getTodosLocalStorage()}},{key:"addTodo",value:function(e){this.authService.isLoggedIn?this.addTodoFirebase(e):this.addTodoLocalStorage(e)}},{key:"updateTodo",value:function(e){this.authService.isLoggedIn?this.updateTodoFirebase(e):this.updateTodoLocalStorage(e)}},{key:"deleteTodo",value:function(e){this.authService.isLoggedIn?this.deleteTodoFirebase(e):this.deleteTodoLocalStorage(e)}},{key:"importToFirebase",value:function(e){var t=this;e.forEach((function(e){t.addTodoFirebase(e)}))}},{key:"updateTodosLocalstorage",value:function(e){localStorage.setItem("todos",JSON.stringify(e))}},{key:"updateCategoriesLocalstorage",value:function(e){localStorage.setItem("cats",JSON.stringify(e))}},{key:"getTodosLocalStorage",value:function(){var e=JSON.parse(localStorage.getItem("todos"));return null!==e?e:[]}},{key:"getCategoriesLocalStorage",value:function(){var e=JSON.parse(localStorage.getItem("cats"));return null!==e?e:[]}},{key:"addTodoLocalStorage",value:function(e){var t=this.getTodosLocalStorage();t?(t.push(e),this.updateTodosLocalstorage(t)):((t=[]).push(e),this.updateTodosLocalstorage(t))}},{key:"addCategorieLocalStorage",value:function(e){var t=this.getCategoriesLocalStorage();t?(t.push(e),this.updateCategoriesLocalstorage(t)):(t.push(new i.a("0","nicht kategorisiert")),t.push(e),this.updateCategoriesLocalstorage(t))}},{key:"updateTodoLocalStorage",value:function(e){var t=this.getTodosLocalStorage().map((function(t){return t.id===e.id?e:t}));this.updateTodosLocalstorage(t)}},{key:"deleteTodoLocalStorage",value:function(e){var t=this.getTodosLocalStorage();t.splice(t.indexOf(e),1),this.updateTodosLocalstorage(t)}},{key:"deleteCategorieLocalStorage",value:function(e){var t=this.getCategoriesLocalStorage();t.splice(t.indexOf(e),1),this.updateCategoriesLocalstorage(t)}},{key:"getTodosFirebase",value:function(){return e.parsStringToObjectArray(this.authService.getUser().todos)}},{key:"getCategoriesFirebase",value:function(){return e.parsStringToObjectArray(this.authService.getUser().kategorien)}},{key:"addTodoFirebase",value:function(e){var t=this.authService.getUser();t.todos.push(JSON.stringify(e)),this.authService.updateUser(t)}},{key:"addCategorieFirebase",value:function(e){var t=this.authService.getUser();t.kategorien.push(JSON.stringify(e)),this.authService.updateUser(t)}},{key:"updateTodoFirebase",value:function(t){var r=this.authService.getUser(),n=e.parsStringToObjectArray(r.todos);r.todos=e.parsObjectArrayToString(n.map((function(e){return e.id===t.id?t:e}))),this.authService.updateUser(r)}},{key:"deleteTodoFirebase",value:function(e){var t=this.authService.getUser();t.todos.splice(t.todos.indexOf(JSON.stringify(e)),1),this.authService.updateUser(t)}},{key:"deleteCategorieFirebase",value:function(e){var t=this.authService.getUser();t.kategorien.splice(t.kategorien.indexOf(JSON.stringify(e)),1),this.authService.updateUser(t)}}],[{key:"parsObjectArrayToString",value:function(e){var t=[];return e.map((function(e){t.push(JSON.stringify(e))})),t}},{key:"parsStringToObjectArray",value:function(e){var t=[];return e.map((function(e){var r=JSON.parse(e);t.push(r)})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Rb(s.a))},e.\u0275prov=a.Eb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},ZETX:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,a=n("mrSG"),s=n("uVvT"),u=function e(t,n,o){r(this,e),this.kategorien=[JSON.stringify(new s.a("0","nicht kategorisiert"))],this.email=t,this.nutzername=n,this.profilbild=o},c=n("lJxs"),d=n("NKrf"),h=n("fXoL"),l=n("tyNb"),g=n("I/3d"),f=n("UbJi"),v=n("TEn/"),p=((i=function(){function e(t,n,o,i,a){r(this,e),this.router=t,this.afs=n,this.afAuth=o,this.loadingController=i,this.popoverController=a,this.isLoggedIn=!1,this.loading=this.loadingController.create({message:"Bitte warten...",duration:1500}),this.userCollection=n.collection("users")}return o(e,[{key:"presentPopoverLogin",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverController.create({component:d.a,event:e,translucent:!0,componentProps:{}});case 2:return r=t.sent,t.next=5,r.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"persist",value:function(t,r){this.userCollection.doc(r).set(e.copyAndPrepare(t))}},{key:"getUser",value:function(){return this.user}},{key:"findById",value:function(e){return this.userCollection.doc(e).snapshotChanges().pipe(Object(c.a)((function(t){var r=t.payload.data();return r&&(r.id=e),Object.assign({},r)})))}},{key:"signUp",value:function(e,t,r,n){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){var i=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.afAuth.createUserWithEmailAndPassword(t,r).then((function(r){return Object(a.a)(i,void 0,void 0,regeneratorRuntime.mark((function o(){var i=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.persist(new u(t,e,r.user.photoURL),r.user.uid),this.subUser=this.findById(r.user.uid).subscribe((function(e){i.user=e,i.isLoggedIn=!0,n()})),localStorage.setItem("userID",r.user.uid),o.next=5,this.router.navigate(["/home"]);case 5:case"end":return o.stop()}}),o,this)})))})).catch((function(e){alert(e)}));case 2:case"end":return o.stop()}}),o,this)})))}},{key:"signIn",value:function(e,t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var n=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.loading;case 2:return r.next=4,r.sent.present();case 4:return r.next=6,this.afAuth.signInWithEmailAndPassword(e,t).then((function(e){localStorage.setItem("userID",e.user.uid),n.subUser=n.findById(e.user.uid).subscribe((function(e){return Object(a.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.user=e;case 1:case"end":return t.stop()}}),t,this)})))}))})).catch((function(e){alert(e)}));case 6:return r.next=8,this.loading;case 8:return r.next=10,r.sent.onDidDismiss();case 10:case"end":return r.stop()}}),r,this)})))}},{key:"logOut",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.subUser&&this.subUser.unsubscribe(),this.user=void 0,localStorage.clear(),e.next=5,this.afAuth.signOut();case 5:setTimeout((function(){t.isLoggedIn=!1}),800);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"updateUser",value:function(t){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.userCollection.doc(t.id).update(e.copyAndPrepare(t));case 2:case"end":return r.stop()}}),r,this)})))}}],[{key:"copyAndPrepare",value:function(e){var t=Object.assign({},e);return delete t.id,t.nutzername=t.nutzername||null,t.profilbild=t.profilbild||null,t.todos=t.todos||[],t.kategorien=t.kategorien||[],t}}]),e}()).\u0275fac=function(e){return new(e||i)(h.Rb(l.g),h.Rb(g.a),h.Rb(f.a),h.Rb(v.G),h.Rb(v.J))},i.\u0275prov=h.Eb({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},uVvT:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=function e(t,n){r(this,e),this.id="0",this.name="nicht kategorisiert",this.id=t,this.name=n}}}])}();